{"ast":null,"code":"import _slicedToArray from \"C:\\\\Users\\\\User\\\\Desktop\\\\tffproject\\\\Team-32-Repo\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\User\\\\Desktop\\\\tffproject\\\\Team-32-Repo\\\\frontend\\\\src\\\\page\\\\Profilepage.js\";\nimport React, { useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useLocation, useNavigate } from 'react-router-dom';\nimport { getUserDetails, register, updateUserProfile } from '../actions/userAction';\nimport { Row, Col, Form, Button } from 'react-bootstrap';\nimport Message from '../components/Message';\nimport Loader from '../components/Loader';\nimport { Link } from 'react-router-dom';\nimport FormContainer from '../components/FormContainer';\nimport { USER_UPDATE_PROFILE_RESET } from '../constants/userConstants';\nfunction Profilepage() {\n  var _useState = useState(''),\n    _useState2 = _slicedToArray(_useState, 2),\n    name = _useState2[0],\n    setName = _useState2[1];\n  var _useState3 = useState(''),\n    _useState4 = _slicedToArray(_useState3, 2),\n    email = _useState4[0],\n    setEmail = _useState4[1];\n  var _useState5 = useState(''),\n    _useState6 = _slicedToArray(_useState5, 2),\n    password = _useState6[0],\n    setPassword = _useState6[1];\n  var _useState7 = useState(''),\n    _useState8 = _slicedToArray(_useState7, 2),\n    confirmPassword = _useState8[0],\n    setConfirmPassword = _useState8[1];\n  var _useState9 = useState(''),\n    _useState10 = _slicedToArray(_useState9, 2),\n    message = _useState10[0],\n    setMessage = _useState10[1];\n  var dispatch = useDispatch();\n  var history = useNavigate();\n  var userDetails = useSelector(function (state) {\n    return state.userDetails;\n  });\n  var error = userDetails.error,\n    loading = userDetails.loading,\n    user = userDetails.user;\n  console.log(userDetails);\n  var userLogin = useSelector(function (state) {\n    return state.userLogin;\n  });\n  var userInfo = userLogin.userInfo;\n  console.log(userLogin);\n  var userUpdateProfile = useSelector(function (state) {\n    return state.userUpdateProfile;\n  });\n  var success = userUpdateProfile.success;\n  console.log(userUpdateProfile);\n  useEffect(function () {\n    if (!userInfo) {\n      history('/login');\n    } else {\n      if (!user || !user.name || success || userInfo._id !== user._id) {\n        dispatch({\n          type: USER_UPDATE_PROFILE_RESET\n        });\n        //dispatch(getUserDetails('profile')) // this line is causing infinite loop\n      } else {\n        setName(user.name);\n        setEmail(user.email);\n      }\n    }\n  }, [dispatch, history, userInfo, user, success]);\n  var submitHandler = function submitHandler(e) {\n    e.preventDefault();\n    if (password !== confirmPassword) {\n      setMessage('Passwords do not match.');\n    } else {\n      dispatch(updateUserProfile({\n        'id': user._id,\n        'name': name,\n        'email': email,\n        'password': password\n      }));\n      setMessage('');\n    }\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    md: 4,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    className: \"product-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 17\n    }\n  }, \"My Profile\"), message && /*#__PURE__*/React.createElement(Message, {\n    variant: \"danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 29\n    }\n  }, error), loading && /*#__PURE__*/React.createElement(Loader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(Form, {\n    onSubmit: submitHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Form.Group, {\n    controlId: \"name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 25\n    }\n  }, \"Username\"), /*#__PURE__*/React.createElement(Form.Control, {\n    required: true,\n    type: \"name\",\n    placeholder: \"Enter your new username\",\n    value: name,\n    onChange: function onChange(e) {\n      return setName(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(Form.Group, {\n    controlId: \"email\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 25\n    }\n  }, \"Email\"), /*#__PURE__*/React.createElement(Form.Control, {\n    required: true,\n    type: \"email\",\n    placeholder: \"Enter your new email\",\n    value: email,\n    onChange: function onChange(e) {\n      return setEmail(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(Form.Group, {\n    controlId: \"password\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 25\n    }\n  }, \"Password\"), /*#__PURE__*/React.createElement(Form.Control, {\n    required: true,\n    type: \"password\",\n    placeholder: \"Enter your new password\",\n    value: password,\n    onChange: function onChange(e) {\n      return setPassword(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(Form.Group, {\n    controlId: \"passwordConfirm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 25\n    }\n  }, \"Confirm password\"), /*#__PURE__*/React.createElement(Form.Control, {\n    required: true,\n    type: \"password\",\n    placeholder: \"Confirm your new password\",\n    value: confirmPassword,\n    onChange: function onChange(e) {\n      return setConfirmPassword(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(Button, {\n    type: \"submit\",\n    variant: \"warning\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 21\n    }\n  }, \"Update\")))));\n}\nexport default Profilepage;","map":{"version":3,"names":["React","useEffect","useState","useDispatch","useSelector","useLocation","useNavigate","getUserDetails","register","updateUserProfile","Row","Col","Form","Button","Message","Loader","Link","FormContainer","USER_UPDATE_PROFILE_RESET","Profilepage","name","setName","email","setEmail","password","setPassword","confirmPassword","setConfirmPassword","message","setMessage","dispatch","history","userDetails","state","error","loading","user","console","log","userLogin","userInfo","userUpdateProfile","success","_id","type","submitHandler","e","preventDefault","target","value"],"sources":["C:/Users/User/Desktop/tffproject/Team-32-Repo/frontend/src/page/Profilepage.js"],"sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { useLocation,  useNavigate } from 'react-router-dom'\r\nimport { getUserDetails, register, updateUserProfile } from '../actions/userAction'\r\nimport { Row, Col, Form, Button } from 'react-bootstrap'\r\nimport Message from '../components/Message'\r\nimport Loader  from '../components/Loader'\r\nimport { Link } from 'react-router-dom';\r\nimport FormContainer from '../components/FormContainer';\r\nimport { USER_UPDATE_PROFILE_RESET } from '../constants/userConstants';\r\n\r\nfunction Profilepage() {\r\n\r\n    const [name, setName] =useState('')\r\n    const [email, setEmail] =useState('')\r\n    const [password, setPassword] = useState('')\r\n    const [confirmPassword, setConfirmPassword] = useState('')\r\n    const [message, setMessage] = useState('')\r\n\r\n    const dispatch = useDispatch()\r\n    const history = useNavigate()\r\n\r\n\r\n    const userDetails = useSelector(state=>state.userDetails)\r\n    const { error, loading, user } = userDetails\r\n    console.log(userDetails)\r\n    \r\n    const userLogin = useSelector(state=>state.userLogin)\r\n    const { userInfo } = userLogin\r\n    console.log(userLogin)\r\n\r\n    const userUpdateProfile = useSelector(state=>state.userUpdateProfile)\r\n    const { success } = userUpdateProfile\r\n    console.log(userUpdateProfile)\r\n\r\n    useEffect(() => {\r\n        if (!userInfo) {\r\n            history('/login')\r\n        } else {\r\n            if (!user || !user.name || success || userInfo._id !== user._id) {\r\n                dispatch({ type: USER_UPDATE_PROFILE_RESET })\r\n                //dispatch(getUserDetails('profile')) // this line is causing infinite loop\r\n\r\n            } else {\r\n                setName(user.name)\r\n                setEmail(user.email)\r\n            }\r\n        }\r\n    }, [dispatch, history, userInfo, user, success])\r\n\r\n    const submitHandler = (e)=>{\r\n        e.preventDefault()\r\n\r\n        if(password!==confirmPassword){\r\n            setMessage('Passwords do not match.')\r\n        }\r\n        else\r\n        {\r\n            dispatch(updateUserProfile({\r\n                'id': user._id,\r\n                'name': name,\r\n                'email': email,\r\n                'password':password\r\n            }))\r\n            setMessage('')\r\n        }\r\n    }\r\n\r\n     return (\r\n    <div>\r\n        <Row>\r\n            <Col md={4}>\r\n                <h2 className='product-title'>My Profile</h2>\r\n                {message && <Message variant='danger'>{error}</Message>}\r\n                {loading && <Loader/>}\r\n                <Form onSubmit={submitHandler}>\r\n                    <Form.Group controlId='name'>\r\n                        <Form.Label>Username</Form.Label>\r\n                        <Form.Control\r\n                         required \r\n                        type='name'\r\n                        placeholder='Enter your new username'\r\n                        value={name}\r\n                        onChange={(e) => setName(e.target.value)}\r\n                        \r\n                        ></Form.Control>\r\n\r\n\r\n                    </Form.Group>\r\n\r\n                    <Form.Group controlId='email'>\r\n                        <Form.Label>Email</Form.Label>\r\n                        <Form.Control\r\n                         required \r\n                        type='email'\r\n                        placeholder='Enter your new email'\r\n                        value={email}\r\n                        onChange={(e) => setEmail(e.target.value)}\r\n                        \r\n                        ></Form.Control>\r\n\r\n\r\n                    </Form.Group>\r\n\r\n                    <Form.Group controlId='password'>\r\n                        <Form.Label>Password</Form.Label>\r\n                        <Form.Control\r\n                         required \r\n                        type='password'\r\n                        placeholder='Enter your new password'\r\n                        value={password}\r\n                        onChange={(e) => setPassword(e.target.value)}                     \r\n                        ></Form.Control>\r\n                </Form.Group>\r\n\r\n                    <Form.Group controlId='passwordConfirm'>\r\n                        <Form.Label>Confirm password</Form.Label>\r\n                        <Form.Control\r\n                         required \r\n                        type='password'\r\n                        placeholder='Confirm your new password'\r\n                        value={confirmPassword}\r\n                        onChange={(e) => setConfirmPassword(e.target.value)}                      \r\n                        ></Form.Control>\r\n                    </Form.Group>\r\n                    <Button type='submit' variant='warning'>Update</Button>\r\n                </Form>           \r\n            </Col>\r\n          </Row>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Profilepage"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAClD,SAASC,WAAW,EAAEC,WAAW,QAAQ,aAAa;AACtD,SAASC,WAAW,EAAGC,WAAW,QAAQ,kBAAkB;AAC5D,SAASC,cAAc,EAAEC,QAAQ,EAAEC,iBAAiB,QAAQ,uBAAuB;AACnF,SAASC,GAAG,EAAEC,GAAG,EAAEC,IAAI,EAAEC,MAAM,QAAQ,iBAAiB;AACxD,OAAOC,OAAO,MAAM,uBAAuB;AAC3C,OAAOC,MAAM,MAAO,sBAAsB;AAC1C,SAASC,IAAI,QAAQ,kBAAkB;AACvC,OAAOC,aAAa,MAAM,6BAA6B;AACvD,SAASC,yBAAyB,QAAQ,4BAA4B;AAEtE,SAASC,WAAW,GAAG;EAAA,gBAEIjB,QAAQ,CAAC,EAAE,CAAC;IAAA;IAA5BkB,IAAI;IAAEC,OAAO;EAAA,iBACKnB,QAAQ,CAAC,EAAE,CAAC;IAAA;IAA9BoB,KAAK;IAAEC,QAAQ;EAAA,iBACUrB,QAAQ,CAAC,EAAE,CAAC;IAAA;IAArCsB,QAAQ;IAAEC,WAAW;EAAA,iBACkBvB,QAAQ,CAAC,EAAE,CAAC;IAAA;IAAnDwB,eAAe;IAAEC,kBAAkB;EAAA,iBACZzB,QAAQ,CAAC,EAAE,CAAC;IAAA;IAAnC0B,OAAO;IAAEC,UAAU;EAE1B,IAAMC,QAAQ,GAAG3B,WAAW,EAAE;EAC9B,IAAM4B,OAAO,GAAGzB,WAAW,EAAE;EAG7B,IAAM0B,WAAW,GAAG5B,WAAW,CAAC,UAAA6B,KAAK;IAAA,OAAEA,KAAK,CAACD,WAAW;EAAA,EAAC;EAAA,IACjDE,KAAK,GAAoBF,WAAW,CAApCE,KAAK;IAAEC,OAAO,GAAWH,WAAW,CAA7BG,OAAO;IAAEC,IAAI,GAAKJ,WAAW,CAApBI,IAAI;EAC5BC,OAAO,CAACC,GAAG,CAACN,WAAW,CAAC;EAExB,IAAMO,SAAS,GAAGnC,WAAW,CAAC,UAAA6B,KAAK;IAAA,OAAEA,KAAK,CAACM,SAAS;EAAA,EAAC;EAAA,IAC7CC,QAAQ,GAAKD,SAAS,CAAtBC,QAAQ;EAChBH,OAAO,CAACC,GAAG,CAACC,SAAS,CAAC;EAEtB,IAAME,iBAAiB,GAAGrC,WAAW,CAAC,UAAA6B,KAAK;IAAA,OAAEA,KAAK,CAACQ,iBAAiB;EAAA,EAAC;EAAA,IAC7DC,OAAO,GAAKD,iBAAiB,CAA7BC,OAAO;EACfL,OAAO,CAACC,GAAG,CAACG,iBAAiB,CAAC;EAE9BxC,SAAS,CAAC,YAAM;IACZ,IAAI,CAACuC,QAAQ,EAAE;MACXT,OAAO,CAAC,QAAQ,CAAC;IACrB,CAAC,MAAM;MACH,IAAI,CAACK,IAAI,IAAI,CAACA,IAAI,CAAChB,IAAI,IAAIsB,OAAO,IAAIF,QAAQ,CAACG,GAAG,KAAKP,IAAI,CAACO,GAAG,EAAE;QAC7Db,QAAQ,CAAC;UAAEc,IAAI,EAAE1B;QAA0B,CAAC,CAAC;QAC7C;MAEJ,CAAC,MAAM;QACHG,OAAO,CAACe,IAAI,CAAChB,IAAI,CAAC;QAClBG,QAAQ,CAACa,IAAI,CAACd,KAAK,CAAC;MACxB;IACJ;EACJ,CAAC,EAAE,CAACQ,QAAQ,EAAEC,OAAO,EAAES,QAAQ,EAAEJ,IAAI,EAAEM,OAAO,CAAC,CAAC;EAEhD,IAAMG,aAAa,GAAG,SAAhBA,aAAa,CAAIC,CAAC,EAAG;IACvBA,CAAC,CAACC,cAAc,EAAE;IAElB,IAAGvB,QAAQ,KAAGE,eAAe,EAAC;MAC1BG,UAAU,CAAC,yBAAyB,CAAC;IACzC,CAAC,MAED;MACIC,QAAQ,CAACrB,iBAAiB,CAAC;QACvB,IAAI,EAAE2B,IAAI,CAACO,GAAG;QACd,MAAM,EAAEvB,IAAI;QACZ,OAAO,EAAEE,KAAK;QACd,UAAU,EAACE;MACf,CAAC,CAAC,CAAC;MACHK,UAAU,CAAC,EAAE,CAAC;IAClB;EACJ,CAAC;EAEA,oBACD;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBACI,oBAAC,GAAG;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBACA,oBAAC,GAAG;IAAC,EAAE,EAAE,CAAE;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBACP;IAAI,SAAS,EAAC,eAAe;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GAAC,YAAU,CAAK,EAC5CD,OAAO,iBAAI,oBAAC,OAAO;IAAC,OAAO,EAAC,QAAQ;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GAAEM,KAAK,CAAW,EACtDC,OAAO,iBAAI,oBAAC,MAAM;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EAAE,eACrB,oBAAC,IAAI;IAAC,QAAQ,EAAEU,aAAc;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBAC1B,oBAAC,IAAI,CAAC,KAAK;IAAC,SAAS,EAAC,MAAM;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBACxB,oBAAC,IAAI,CAAC,KAAK;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GAAC,UAAQ,CAAa,eACjC,oBAAC,IAAI,CAAC,OAAO;IACZ,QAAQ;IACT,IAAI,EAAC,MAAM;IACX,WAAW,EAAC,yBAAyB;IACrC,KAAK,EAAEzB,IAAK;IACZ,QAAQ,EAAE,kBAAC0B,CAAC;MAAA,OAAKzB,OAAO,CAACyB,CAAC,CAACE,MAAM,CAACC,KAAK,CAAC;IAAA,CAAC;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EAEzB,CAGP,eAEb,oBAAC,IAAI,CAAC,KAAK;IAAC,SAAS,EAAC,OAAO;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBACzB,oBAAC,IAAI,CAAC,KAAK;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GAAC,OAAK,CAAa,eAC9B,oBAAC,IAAI,CAAC,OAAO;IACZ,QAAQ;IACT,IAAI,EAAC,OAAO;IACZ,WAAW,EAAC,sBAAsB;IAClC,KAAK,EAAE3B,KAAM;IACb,QAAQ,EAAE,kBAACwB,CAAC;MAAA,OAAKvB,QAAQ,CAACuB,CAAC,CAACE,MAAM,CAACC,KAAK,CAAC;IAAA,CAAC;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EAE1B,CAGP,eAEb,oBAAC,IAAI,CAAC,KAAK;IAAC,SAAS,EAAC,UAAU;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBAC5B,oBAAC,IAAI,CAAC,KAAK;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GAAC,UAAQ,CAAa,eACjC,oBAAC,IAAI,CAAC,OAAO;IACZ,QAAQ;IACT,IAAI,EAAC,UAAU;IACf,WAAW,EAAC,yBAAyB;IACrC,KAAK,EAAEzB,QAAS;IAChB,QAAQ,EAAE,kBAACsB,CAAC;MAAA,OAAKrB,WAAW,CAACqB,CAAC,CAACE,MAAM,CAACC,KAAK,CAAC;IAAA,CAAC;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EAC7B,CACX,eAET,oBAAC,IAAI,CAAC,KAAK;IAAC,SAAS,EAAC,iBAAiB;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBACnC,oBAAC,IAAI,CAAC,KAAK;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GAAC,kBAAgB,CAAa,eACzC,oBAAC,IAAI,CAAC,OAAO;IACZ,QAAQ;IACT,IAAI,EAAC,UAAU;IACf,WAAW,EAAC,2BAA2B;IACvC,KAAK,EAAEvB,eAAgB;IACvB,QAAQ,EAAE,kBAACoB,CAAC;MAAA,OAAKnB,kBAAkB,CAACmB,CAAC,CAACE,MAAM,CAACC,KAAK,CAAC;IAAA,CAAC;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EACpC,CACP,eACb,oBAAC,MAAM;IAAC,IAAI,EAAC,QAAQ;IAAC,OAAO,EAAC,SAAS;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GAAC,QAAM,CAAS,CACpD,CACL,CACF,CACN;AAEV;AAEA,eAAe9B,WAAW"},"metadata":{},"sourceType":"module"}